INFO [2022-12-13 19:47:09] Logging to results/d895866b/run.log...
INFO [2022-12-13 19:47:09] Loading /Users/shsingh/work/projects/2019_07_11_JUMP-CP/workspace/software/2021_Chandrasekaran_submitted/profiles/2020_11_04_CPJUMP1/BR00116991/BR00116991_normalized_feature_select_negcon_batch.csv.gz ...
INFO [2022-12-13 19:47:10] Adding a column Metadata_Plate = BR00116991 to /Users/shsingh/work/projects/2019_07_11_JUMP-CP/workspace/software/2021_Chandrasekaran_submitted/profiles/2020_11_04_CPJUMP1/BR00116991/BR00116991_normalized_feature_select_negcon_batch.csv.gz...
INFO [2022-12-13 19:47:10] Loading /Users/shsingh/work/projects/2019_07_11_JUMP-CP/workspace/software/2021_Chandrasekaran_submitted/profiles/2020_11_04_CPJUMP1/BR00116992/BR00116992_normalized_feature_select_negcon_batch.csv.gz ...
INFO [2022-12-13 19:47:12] Adding a column Metadata_Plate = BR00116992 to /Users/shsingh/work/projects/2019_07_11_JUMP-CP/workspace/software/2021_Chandrasekaran_submitted/profiles/2020_11_04_CPJUMP1/BR00116992/BR00116992_normalized_feature_select_negcon_batch.csv.gz...
INFO [2022-12-13 19:47:12] Loading /Users/shsingh/work/projects/2019_07_11_JUMP-CP/workspace/software/2021_Chandrasekaran_submitted/profiles/2020_11_04_CPJUMP1/BR00116993/BR00116993_normalized_feature_select_negcon_batch.csv.gz ...
INFO [2022-12-13 19:47:13] Adding a column Metadata_Plate = BR00116993 to /Users/shsingh/work/projects/2019_07_11_JUMP-CP/workspace/software/2021_Chandrasekaran_submitted/profiles/2020_11_04_CPJUMP1/BR00116993/BR00116993_normalized_feature_select_negcon_batch.csv.gz...
INFO [2022-12-13 19:47:13] Loading /Users/shsingh/work/projects/2019_07_11_JUMP-CP/workspace/software/2021_Chandrasekaran_submitted/profiles/2020_11_04_CPJUMP1/BR00116994/BR00116994_normalized_feature_select_negcon_batch.csv.gz ...
INFO [2022-12-13 19:47:15] Adding a column Metadata_Plate = BR00116994 to /Users/shsingh/work/projects/2019_07_11_JUMP-CP/workspace/software/2021_Chandrasekaran_submitted/profiles/2020_11_04_CPJUMP1/BR00116994/BR00116994_normalized_feature_select_negcon_batch.csv.gz...
INFO [2022-12-13 19:47:19] Reading results/1f5aa646/metrics_level_1_ref_null_adjusted.parquet ...
INFO [2022-12-13 19:47:19] Selecting the following column from metrics: Metadata_broad_sample
INFO [2022-12-13 19:47:19] Selecting the following column from metrics: Metadata_control_type
INFO [2022-12-13 19:47:19] Selecting the following column from metrics: Metadata_reference_or_other
INFO [2022-12-13 19:47:19] Number of rows in metrics = 306
INFO [2022-12-13 19:47:19] Number of rows in profiles_experiment_other = 320
INFO [2022-12-13 19:47:19] Number of rows in profiles_experiment_other_filtered = 288
INFO [2022-12-13 19:47:19] Number of rows in profiles_experiment = 384
INFO [2022-12-13 19:47:19] Number of rows in profiles_experiment_filtered = 352
INFO [2022-12-13 19:47:19] Number of rows in external_metadata = 307
INFO [2022-12-13 19:47:19] Number of rows in profiles_experiment before joining external metadata = 352
INFO [2022-12-13 19:47:19] Number of rows in profiles_experiment after joining external metadata = 352
INFO [2022-12-13 19:47:19] Adding dummy metadata column `Metadata_dummy` with value 0 throughout for all rows
INFO [2022-12-13 19:47:19] Splitting rows on Metadata_target_list
INFO [2022-12-13 19:47:21] Writing results/d895866b/profiles_split_mapper.csv ...
INFO [2022-12-13 19:47:21] Number of rows in profiles_experiment before splitting = 352
INFO [2022-12-13 19:47:21] Number of rows in profiles_experiment after splitting = 1509
INFO [2022-12-13 19:47:21] Writing results/d895866b/profiles.parquet ...
INFO [2022-12-13 19:47:23] Calculating index ...
INFO [2022-12-13 19:47:23] Performing all similarity calculations because `any_different_cols_non_rep` is not NULL ...
DEBUG [2022-12-13 19:47:24] Number of columns before NA filtering = 912
DEBUG [2022-12-13 19:47:24] Number of columns after NA filtering = 912
INFO [2022-12-13 19:47:24] Writing results/d895866b/index.parquet ...
INFO [2022-12-13 19:47:24] Writing results/d895866b/index.parquet ...
INFO [2022-12-13 19:47:24] Collate and annotate index ...
DEBUG [2022-12-13 19:47:25] sim_filter_all_same: inner joining rows
INFO [2022-12-13 19:47:28] Filtering collated_sim ...
INFO [2022-12-13 19:47:28] Number of rows in collated_sim before filtering = 2166001
INFO [2022-12-13 19:47:29] Number of rows in collated_sim after filtering = 437486
INFO [2022-12-13 19:47:29] Writing results/d895866b/collatedindex.parquet ...
INFO [2022-12-13 19:47:34] Loading index file ...
INFO [2022-12-13 19:47:34] Populating index with similarities ...
DEBUG [2022-12-13 19:47:35] Number of columns before NA filtering = 912
DEBUG [2022-12-13 19:47:35] Number of columns after NA filtering = 912
TRACE [2022-12-13 19:47:35] Using purrr for sequential processing
INFO [2022-12-13 19:47:42] Writing results/d895866b/collatedsim.parquet ...
INFO [2022-12-13 19:47:43] Computing metrics ...
INFO [2022-12-13 19:47:43] Calculating metrics using sim_type_background = 'ref' ...
TRACE [2022-12-13 19:47:43] Compute metrics for signal=rep background=ref
TRACE [2022-12-13 19:47:43] Using furrr for parallel processing
TRACE [2022-12-13 19:47:43] function (..., envir = parent.frame(), workers = 8) 
strategy(..., envir = envir, workers = workers)
TRACE [2022-12-13 19:47:44]   Number of rows = 1119
TRACE [2022-12-13 19:47:44]   Computing `sim_scaled` ...
TRACE [2022-12-13 19:47:44]   Computing `sim_ranked_relrank` ...
TRACE [2022-12-13 19:47:44]   Computing summaries ...
TRACE [2022-12-13 19:47:44]   Setting up retrieval ...
TRACE [2022-12-13 19:47:44]   Computing average precision ...
TRACE [2022-12-13 19:47:44]   Computing R-precision ...
TRACE [2022-12-13 19:47:44]   Wrapping up metrics ...
TRACE [2022-12-13 19:47:44] Completed metrics for signal=rep background=ref
INFO [2022-12-13 19:47:44] Calculating metrics using sim_type_background = 'non_rep' because `any_different_cols_non_rep` is not NULL ...
TRACE [2022-12-13 19:47:44] Compute metrics for signal=rep background=non_rep
TRACE [2022-12-13 19:47:44] Using furrr for parallel processing
TRACE [2022-12-13 19:47:44] function (..., envir = parent.frame(), workers = 8) 
strategy(..., envir = envir, workers = workers)
TRACE [2022-12-13 19:47:46]   Number of rows = 1119
TRACE [2022-12-13 19:47:46]   Computing `sim_scaled` ...
TRACE [2022-12-13 19:47:49]   Computing `sim_ranked_relrank` ...
TRACE [2022-12-13 19:47:55]   Computing summaries ...
TRACE [2022-12-13 19:47:55]   Setting up retrieval ...
TRACE [2022-12-13 19:47:59]   Computing average precision ...
TRACE [2022-12-13 19:48:01]   Computing R-precision ...
TRACE [2022-12-13 19:48:03]   Wrapping up metrics ...
TRACE [2022-12-13 19:48:03] Completed metrics for signal=rep background=non_rep
INFO [2022-12-13 19:48:04] Writing results/d895866b/metrics_level_1_0_ref.parquet...
INFO [2022-12-13 19:48:04] Writing results/d895866b/metrics_level_1_ref.parquet...
INFO [2022-12-13 19:48:04] Writing results/d895866b/metrics_level_1_0_non_rep.parquet...
INFO [2022-12-13 19:48:04] Writing results/d895866b/metrics_level_1_non_rep.parquet...
INFO [2022-12-13 19:48:04] Writing indicator file results/d895866b/metrics.done ...
INFO [2022-12-13 19:48:04] Reading results/d895866b/metrics_level_1_0_non_rep.parquet ...
INFO [2022-12-13 19:48:04] Reading results/d895866b/metrics_level_1_non_rep.parquet ...
INFO [2022-12-13 19:48:05] Compute retrieval random baseline for m = 1, n = 287
INFO [2022-12-13 19:48:17] Compute retrieval random baseline for m = 2, n = 287
INFO [2022-12-13 19:48:27] Compute retrieval random baseline for m = 3, n = 287
INFO [2022-12-13 19:48:38] Compute retrieval random baseline for m = 4, n = 287
INFO [2022-12-13 19:48:50] Compute retrieval random baseline for m = 9, n = 287
INFO [2022-12-13 19:49:02] Compute retrieval random baseline for m = 6, n = 287
INFO [2022-12-13 19:49:14] Compute retrieval random baseline for m = 5, n = 287
INFO [2022-12-13 19:49:24] Compute retrieval random baseline for m = 8, n = 287
INFO [2022-12-13 19:49:35] Compute retrieval random baseline for m = 1, n = 286
INFO [2022-12-13 19:49:46] Compute retrieval random baseline for m = 4, n = 286
INFO [2022-12-13 19:49:56] Compute retrieval random baseline for m = 3, n = 286
INFO [2022-12-13 19:50:07] Compute retrieval random baseline for m = 5, n = 286
INFO [2022-12-13 19:50:18] Compute retrieval random baseline for m = 7, n = 287
INFO [2022-12-13 19:50:29] Compute retrieval random baseline for m = 2, n = 286
INFO [2022-12-13 19:50:40] Compute retrieval random baseline for m = 8, n = 286
INFO [2022-12-13 19:50:51] Compute retrieval random baseline for m = 6, n = 286
INFO [2022-12-13 19:51:02] Writing results/d895866b/metrics_level_1_non_rep_null_adjusted.parquet ...
